"use strict";const e=require("react/jsx-runtime"),a=require("react"),L=require("lucide-react"),N=require("react-colorful"),k=require("./index-CWKNKm3Y.cjs"),v=require("./index-BObJ0_Vs.cjs"),x=require("./popover-C53Gavq8.cjs"),w=require("./input-8Tv6i4jL.cjs"),y=require("./separator-B3F4FNZb.cjs"),q=require("./button-BT4Gvjni.cjs");function m(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M18 14c0-4-6-10.8-6-10.8s-1.33 1.51-2.73 3.52l8.59 8.59c.09-.42.14-.86.14-1.31m-.88 3.12L12.5 12.5L5.27 5.27L4 6.55l3.32 3.32C6.55 11.32 6 12.79 6 14c0 3.31 2.69 6 6 6c1.52 0 2.9-.57 3.96-1.5l2.63 2.63l1.27-1.27z"})})}function M(l){const{t:o}=v.useLocale(),{highlight:d=!1,disabled:p=!1,selectedColor:n,setSelectedColor:s,onChange:c,colors:f=k.COLORS_LIST}=l,j=a.useMemo(()=>{const t=f,r=[];for(let i=0;i<t.length;i+=10)r.push(t.slice(i,i+10));return r},[f]),[u,b]=a.useState([]),C=t=>{const r=[...u],i=r.indexOf(t);i!==-1&&r.splice(i,1),r.unshift(t),r.length>10&&r.pop(),b(r)};function h(t){if(t===void 0){s==null||s(t),c==null||c(t);return}/^#([\da-f]{3}){1,2}$/i.test(t)&&(s==null||s(t),c==null||c(t),C(t))}return e.jsxs(x.Popover,{modal:!0,children:[e.jsx(x.PopoverTrigger,{asChild:!0,className:"!richtext-p-0",disabled:p,children:l==null?void 0:l.children}),e.jsx(x.PopoverContent,{align:"start",className:"richtext-size-full richtext-p-2",hideWhenDetached:!0,side:"bottom",children:e.jsxs("div",{className:"richtext-flex richtext-flex-col",children:[d?e.jsxs("div",{className:"rd-1 richtext-flex richtext-cursor-pointer richtext-items-center richtext-gap-[4px] richtext-p-1 hover:richtext-bg-accent",onClick:()=>h(void 0),children:[e.jsx(m,{}),e.jsx("span",{className:"richtext-ml-1 richtext-text-sm",children:o("editor.nofill")})]}):e.jsxs("div",{className:"rd-1 richtext-flex richtext-cursor-pointer richtext-items-center richtext-gap-[4px] richtext-p-1 hover:richtext-bg-accent",onClick:()=>{h(void 0)},children:[e.jsx(m,{}),e.jsx("span",{className:"richtext-ml-1 richtext-text-sm",children:o("editor.default")})]}),j.map((t,r)=>e.jsx("span",{className:"richtext-relative richtext-flex richtext-h-auto richtext-w-full richtext-p-0 last:richtext-pb-2",children:t.map((i,g)=>e.jsx("span",{className:"richtext-inline-block richtext-size-6 richtext-flex-[0_0_auto] richtext-cursor-pointer richtext-rounded-sm !richtext-border richtext-border-transparent richtext-p-0.5 hover:richtext-border-border hover:richtext-shadow-sm",onClick:()=>h(i),children:e.jsx("span",{className:"richtext-relative richtext-block richtext-size-[18px] richtext-rounded-[2px] richtext-border-transparent",style:{backgroundColor:i},children:i===n?e.jsx("svg",{className:"richtext-absolute -richtext-top-px richtext-left-px richtext-block richtext-size-3",viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)"},children:e.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})}):e.jsx("svg",{viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)",display:"none"},children:e.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})})})},`sub-color-${g}`))},r)),e.jsxs("div",{children:[e.jsx("div",{className:"richtext-my-1 richtext-text-sm",children:o("editor.recent")}),e.jsx("span",{className:"richtext-relative richtext-flex richtext-h-auto richtext-w-full richtext-p-0 last:richtext-pb-2",children:u==null?void 0:u.map((t,r)=>e.jsx("span",{className:"richtext-inline-block richtext-size-6 richtext-flex-[0_0_auto] richtext-cursor-pointer richtext-rounded-sm !richtext-border richtext-border-transparent richtext-p-0.5 hover:richtext-border-border hover:richtext-shadow-sm",onClick:()=>h(t),children:e.jsx("span",{className:"richtext-relative richtext-block richtext-size-[18px] richtext-rounded-[2px] richtext-border-transparent",style:{backgroundColor:t},children:e.jsx("svg",{viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)",display:"none"},children:e.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})})})},`sub-color-recent-${r}`))})]}),e.jsx(P,{setColor:h})]})})]})}function P({setColor:l}){const[o,d]=a.useState("#000000"),[p,n]=a.useState(!1),{t:s}=v.useLocale();return a.useEffect(()=>()=>{n(!1)},[]),e.jsxs(x.Popover,{open:p,children:[e.jsx(x.PopoverTrigger,{asChild:!0,children:e.jsxs("div",{className:"richtext-p-1.5 richtext-text-sm hover:richtext-cursor-pointer hover:richtext-bg-accent",onClick:c=>{c.preventDefault(),n(!0)},children:[s("editor.color.more"),"..."]})}),e.jsxs(x.PopoverContent,{children:[e.jsxs("div",{className:"richtext-flex richtext-flex-col richtext-items-center richtext-justify-center",children:[e.jsx(N.HexColorPicker,{color:o,onChange:d}),e.jsx(w.Input,{className:"richtext-mt-[8px] richtext-w-full",type:"text",value:o.slice(1),onChange:c=>{c.preventDefault(),d(`#${c.target.value}`)}})]}),e.jsx(y.Separator,{className:"richtext-my-[10px]"}),e.jsx(q.Button,{className:"richtext-w-full",onClick:c=>{c.preventDefault(),l(o),n(!1)},children:e.jsx(L.Plus,{size:16})})]})]})}exports.ColorPicker=M;
