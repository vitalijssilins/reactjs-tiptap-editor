"use strict";var Mn=Object.defineProperty;var $n=(e,t,n)=>t in e?Mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xe=(e,t,n)=>$n(e,typeof t!="symbol"?t+"":t,n);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const m=require("react"),s=require("react/jsx-runtime"),k=require("./index-ugE1dRs4.cjs"),O=require("./ActionButton-DY0olRIe.cjs"),fe=require("./SizeSetter-DayMluAF.cjs"),re=require("./dialog-CVd5Mqbw.cjs"),ie=require("./Iframe-dhmLY_4S.cjs"),Lt=require("./theme-DvNbe4l0.cjs"),N=require("./index-BObJ0_Vs.cjs"),zt=require("./delete-node-CosiBes5.cjs"),Dn=require("./input-8Tv6i4jL.cjs"),ye=require("./button-BT4Gvjni.cjs"),Ft=require("./checkbox-Cwz3NNxg.cjs"),Ht=require("./ImageGif.cjs"),we=require("./MultiColumn.cjs"),g=require("./index-CSvnpArE.cjs"),qt=require("tippy.js"),kn=require("./HighlightActionButton-CZbTmtAv.cjs"),W=require("./separator-B3F4FNZb.cjs"),Bn=require("./LinkEditBlock-hUT6z7O5.cjs"),y=require("./debounce-DGq84Kwn.cjs"),Ln=require("./Video.cjs"),me=require("./indent-BwKwErCg.cjs"),R=require("./Icon-R3ihBJhB.cjs"),P=require("./dropdown-menu-Hk-jMIb6.cjs"),ae=require("./tooltip-BSrYL2Rz.cjs"),Gt=require("./utils-DmD36e1i.cjs"),zn=require("@radix-ui/react-toast"),Z=require("./index-BF3XvX_Z.cjs"),Fn=require("lucide-react"),Hn=require("./use-toast-Bz3QCOtE.cjs"),qn=require("./index-CWKNKm3Y.cjs"),Gn=require("./editableEditor-CliumnBo.cjs"),Ce=require("./store-Bo9QWzoI.cjs"),ge=require("./events.constant-Cyyj4OFH.cjs"),Un=require("./index-DBoalRcu.cjs"),Vn=require("./ListItem.cjs"),Kn=require("./index-CrxasX7b.cjs"),Wn=require("./Document.cjs"),Jn=require("./Selection.cjs"),Xn=require("./TextBubble.cjs"),Yn=require("./TrailingNode.cjs");function Ut(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const oe=Ut(m),I=Ut(zn);function Zn(){var o;const e=m.useRef({editor:null}),[t,n]=m.useState(!1),[r,i]=m.useState(null);return m.useEffect(()=>{var a;(a=e.current)!=null&&a.editor&&(n(!0),i(e.current.editor))},[e,(o=e.current)==null?void 0:o.editor]),{isReady:t,editor:r,editorRef:e}}function Vt(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var H=Array.isArray,st=y.Symbol?y.Symbol.prototype:void 0,at=st?st.toString:void 0;function je(e){if(typeof e=="string")return e;if(H(e))return Vt(e,je)+"";if(y.isSymbol(e))return at?at.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ct=1/0,Qn=17976931348623157e292;function er(e){if(!e)return e===0?e:0;if(e=y.toNumber(e),e===ct||e===-ct){var t=e<0?-1:1;return t*Qn}return e===e?e:0}function tr(e){var t=er(e),n=t%1;return t===t?n?t-n:t:0}function Ge(e){return e}var nr="[object AsyncFunction]",rr="[object Function]",ir="[object GeneratorFunction]",or="[object Proxy]";function Kt(e){if(!y.isObject(e))return!1;var t=y.baseGetTag(e);return t==rr||t==ir||t==nr||t==or}var Oe=y.root["__core-js_shared__"],lt=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function sr(e){return!!lt&&lt in e}var ar=Function.prototype,cr=ar.toString;function Q(e){if(e!=null){try{return cr.call(e)}catch{}try{return e+""}catch{}}return""}var lr=/[\\^$.*+?()[\]{}|]/g,ur=/^\[object .+?Constructor\]$/,dr=Function.prototype,fr=Object.prototype,hr=dr.toString,xr=fr.hasOwnProperty,mr=RegExp("^"+hr.call(xr).replace(lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gr(e){if(!y.isObject(e)||sr(e))return!1;var t=Kt(e)?mr:ur;return t.test(Q(e))}function pr(e,t){return e==null?void 0:e[t]}function ee(e,t){var n=pr(e,t);return gr(n)?n:void 0}var Ie=ee(y.root,"WeakMap");function vr(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var br=800,yr=16,wr=Date.now;function Cr(e){var t=0,n=0;return function(){var r=wr(),i=yr-(r-n);if(n=r,i>0){if(++t>=br)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function jr(e){return function(){return e}}var ut=function(){try{var e=ee(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Tr=ut?function(e,t){return ut(e,"toString",{configurable:!0,enumerable:!1,value:jr(t),writable:!0})}:Ge,Ar=Cr(Tr);function Sr(e,t,n,r){for(var i=e.length,o=n+-1;++o<i;)if(t(e[o],o,e))return o;return-1}function Er(e){return e!==e}function Pr(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Or(e,t,n){return t===t?Pr(e,t,n):Sr(e,Er,n)}function _r(e,t){var n=e==null?0:e.length;return!!n&&Or(e,t,0)>-1}var Nr=9007199254740991,Rr=/^(?:0|[1-9]\d*)$/;function Wt(e,t){var n=typeof e;return t=t??Nr,!!t&&(n=="number"||n!="symbol"&&Rr.test(e))&&e>-1&&e%1==0&&e<t}function Jt(e,t){return e===t||e!==e&&t!==t}var dt=Math.max;function Ir(e,t,n){return t=dt(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=dt(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(a),vr(e,this,c)}}function Mr(e,t){return Ar(Ir(e,t,Ge),e+"")}var $r=9007199254740991;function Ue(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=$r}function Xt(e){return e!=null&&Ue(e.length)&&!Kt(e)}var Dr=Object.prototype;function kr(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Dr;return e===n}function Br(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Lr="[object Arguments]";function ft(e){return y.isObjectLike(e)&&y.baseGetTag(e)==Lr}var Yt=Object.prototype,zr=Yt.hasOwnProperty,Fr=Yt.propertyIsEnumerable,Ve=ft(function(){return arguments}())?ft:function(e){return y.isObjectLike(e)&&zr.call(e,"callee")&&!Fr.call(e,"callee")};function Hr(){return!1}var Zt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ht=Zt&&typeof module=="object"&&module&&!module.nodeType&&module,qr=ht&&ht.exports===Zt,xt=qr?y.root.Buffer:void 0,Gr=xt?xt.isBuffer:void 0,Me=Gr||Hr,Ur="[object Arguments]",Vr="[object Array]",Kr="[object Boolean]",Wr="[object Date]",Jr="[object Error]",Xr="[object Function]",Yr="[object Map]",Zr="[object Number]",Qr="[object Object]",ei="[object RegExp]",ti="[object Set]",ni="[object String]",ri="[object WeakMap]",ii="[object ArrayBuffer]",oi="[object DataView]",si="[object Float32Array]",ai="[object Float64Array]",ci="[object Int8Array]",li="[object Int16Array]",ui="[object Int32Array]",di="[object Uint8Array]",fi="[object Uint8ClampedArray]",hi="[object Uint16Array]",xi="[object Uint32Array]",S={};S[si]=S[ai]=S[ci]=S[li]=S[ui]=S[di]=S[fi]=S[hi]=S[xi]=!0;S[Ur]=S[Vr]=S[ii]=S[Kr]=S[oi]=S[Wr]=S[Jr]=S[Xr]=S[Yr]=S[Zr]=S[Qr]=S[ei]=S[ti]=S[ni]=S[ri]=!1;function mi(e){return y.isObjectLike(e)&&Ue(e.length)&&!!S[y.baseGetTag(e)]}function Ke(e){return function(t){return e(t)}}var Qt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ce=Qt&&typeof module=="object"&&module&&!module.nodeType&&module,gi=ce&&ce.exports===Qt,_e=gi&&y.freeGlobal.process,Te=function(){try{var e=ce&&ce.require&&ce.require("util").types;return e||_e&&_e.binding&&_e.binding("util")}catch{}}(),mt=Te&&Te.isTypedArray,en=mt?Ke(mt):mi,pi=Object.prototype,vi=pi.hasOwnProperty;function bi(e,t){var n=H(e),r=!n&&Ve(e),i=!n&&!r&&Me(e),o=!n&&!r&&!i&&en(e),a=n||r||i||o,c=a?Br(e.length,String):[],l=c.length;for(var u in e)vi.call(e,u)&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Wt(u,l)))&&c.push(u);return c}function yi(e,t){return function(n){return e(t(n))}}var wi=yi(Object.keys,Object),Ci=Object.prototype,ji=Ci.hasOwnProperty;function Ti(e){if(!kr(e))return wi(e);var t=[];for(var n in Object(e))ji.call(e,n)&&n!="constructor"&&t.push(n);return t}function tn(e){return Xt(e)?bi(e):Ti(e)}var Ai=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Si=/^\w*$/;function We(e,t){if(H(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||y.isSymbol(e)?!0:Si.test(e)||!Ai.test(e)||t!=null&&e in Object(t)}var le=ee(Object,"create");function Ei(){this.__data__=le?le(null):{},this.size=0}function Pi(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Oi="__lodash_hash_undefined__",_i=Object.prototype,Ni=_i.hasOwnProperty;function Ri(e){var t=this.__data__;if(le){var n=t[e];return n===Oi?void 0:n}return Ni.call(t,e)?t[e]:void 0}var Ii=Object.prototype,Mi=Ii.hasOwnProperty;function $i(e){var t=this.__data__;return le?t[e]!==void 0:Mi.call(t,e)}var Di="__lodash_hash_undefined__";function ki(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=le&&t===void 0?Di:t,this}function Y(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Y.prototype.clear=Ei;Y.prototype.delete=Pi;Y.prototype.get=Ri;Y.prototype.has=$i;Y.prototype.set=ki;function Bi(){this.__data__=[],this.size=0}function Ae(e,t){for(var n=e.length;n--;)if(Jt(e[n][0],t))return n;return-1}var Li=Array.prototype,zi=Li.splice;function Fi(e){var t=this.__data__,n=Ae(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():zi.call(t,n,1),--this.size,!0}function Hi(e){var t=this.__data__,n=Ae(t,e);return n<0?void 0:t[n][1]}function qi(e){return Ae(this.__data__,e)>-1}function Gi(e,t){var n=this.__data__,r=Ae(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function G(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}G.prototype.clear=Bi;G.prototype.delete=Fi;G.prototype.get=Hi;G.prototype.has=qi;G.prototype.set=Gi;var ue=ee(y.root,"Map");function Ui(){this.size=0,this.__data__={hash:new Y,map:new(ue||G),string:new Y}}function Vi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Se(e,t){var n=e.__data__;return Vi(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Ki(e){var t=Se(this,e).delete(e);return this.size-=t?1:0,t}function Wi(e){return Se(this,e).get(e)}function Ji(e){return Se(this,e).has(e)}function Xi(e,t){var n=Se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function U(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}U.prototype.clear=Ui;U.prototype.delete=Ki;U.prototype.get=Wi;U.prototype.has=Ji;U.prototype.set=Xi;var Yi="Expected a function";function Je(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Yi);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Je.Cache||U),n}Je.Cache=U;var Zi=500;function Qi(e){var t=Je(e,function(r){return n.size===Zi&&n.clear(),r}),n=t.cache;return t}var eo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,to=/\\(\\)?/g,no=Qi(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(eo,function(n,r,i,o){t.push(i?o.replace(to,"$1"):r||n)}),t});function $e(e){return e==null?"":je(e)}function nn(e,t){return H(e)?e:We(e,t)?[e]:no($e(e))}function Ee(e){if(typeof e=="string"||y.isSymbol(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function rn(e,t){t=nn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Ee(t[n++])];return n&&n==r?e:void 0}function ro(e,t,n){var r=e==null?void 0:rn(e,t);return r===void 0?n:r}function on(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var gt=y.Symbol?y.Symbol.isConcatSpreadable:void 0;function io(e){return H(e)||Ve(e)||!!(gt&&e&&e[gt])}function oo(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=io),i||(i=[]);++o<a;){var c=e[o];n(c)&&on(i,c)}return i}function so(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function ao(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:so(e,t,n)}var co="\\ud800-\\udfff",lo="\\u0300-\\u036f",uo="\\ufe20-\\ufe2f",fo="\\u20d0-\\u20ff",ho=lo+uo+fo,xo="\\ufe0e\\ufe0f",mo="\\u200d",go=RegExp("["+mo+co+ho+xo+"]");function Xe(e){return go.test(e)}function po(e){return e.split("")}var sn="\\ud800-\\udfff",vo="\\u0300-\\u036f",bo="\\ufe20-\\ufe2f",yo="\\u20d0-\\u20ff",wo=vo+bo+yo,Co="\\ufe0e\\ufe0f",jo="["+sn+"]",De="["+wo+"]",ke="\\ud83c[\\udffb-\\udfff]",To="(?:"+De+"|"+ke+")",an="[^"+sn+"]",cn="(?:\\ud83c[\\udde6-\\uddff]){2}",ln="[\\ud800-\\udbff][\\udc00-\\udfff]",Ao="\\u200d",un=To+"?",dn="["+Co+"]?",So="(?:"+Ao+"(?:"+[an,cn,ln].join("|")+")"+dn+un+")*",Eo=dn+un+So,Po="(?:"+[an+De+"?",De,cn,ln,jo].join("|")+")",Oo=RegExp(ke+"(?="+ke+")|"+Po+Eo,"g");function _o(e){return e.match(Oo)||[]}function No(e){return Xe(e)?_o(e):po(e)}function Ro(){this.__data__=new G,this.size=0}function Io(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Mo(e){return this.__data__.get(e)}function $o(e){return this.__data__.has(e)}var Do=200;function ko(e,t){var n=this.__data__;if(n instanceof G){var r=n.__data__;if(!ue||r.length<Do-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new U(r)}return n.set(e,t),this.size=n.size,this}function q(e){var t=this.__data__=new G(e);this.size=t.size}q.prototype.clear=Ro;q.prototype.delete=Io;q.prototype.get=Mo;q.prototype.has=$o;q.prototype.set=ko;function Bo(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Lo(){return[]}var zo=Object.prototype,Fo=zo.propertyIsEnumerable,pt=Object.getOwnPropertySymbols,Ho=pt?function(e){return e==null?[]:(e=Object(e),Bo(pt(e),function(t){return Fo.call(e,t)}))}:Lo;function qo(e,t,n){var r=t(e);return H(e)?r:on(r,n(e))}function vt(e){return qo(e,tn,Ho)}var Be=ee(y.root,"DataView"),Le=ee(y.root,"Promise"),ze=ee(y.root,"Set"),bt="[object Map]",Go="[object Object]",yt="[object Promise]",wt="[object Set]",Ct="[object WeakMap]",jt="[object DataView]",Uo=Q(Be),Vo=Q(ue),Ko=Q(Le),Wo=Q(ze),Jo=Q(Ie),K=y.baseGetTag;(Be&&K(new Be(new ArrayBuffer(1)))!=jt||ue&&K(new ue)!=bt||Le&&K(Le.resolve())!=yt||ze&&K(new ze)!=wt||Ie&&K(new Ie)!=Ct)&&(K=function(e){var t=y.baseGetTag(e),n=t==Go?e.constructor:void 0,r=n?Q(n):"";if(r)switch(r){case Uo:return jt;case Vo:return bt;case Ko:return yt;case Wo:return wt;case Jo:return Ct}return t});var Tt=y.root.Uint8Array,Xo="__lodash_hash_undefined__";function Yo(e){return this.__data__.set(e,Xo),this}function Zo(e){return this.__data__.has(e)}function de(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new U;++t<n;)this.add(e[t])}de.prototype.add=de.prototype.push=Yo;de.prototype.has=Zo;function Qo(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function fn(e,t){return e.has(t)}var es=1,ts=2;function hn(e,t,n,r,i,o){var a=n&es,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,v=n&ts?new de:void 0;for(o.set(e,t),o.set(t,e);++f<c;){var b=e[f],x=t[f];if(r)var p=a?r(x,b,f,t,e,o):r(b,x,f,e,t,o);if(p!==void 0){if(p)continue;h=!1;break}if(v){if(!Qo(t,function(j,A){if(!fn(v,A)&&(b===j||i(b,j,n,r,o)))return v.push(A)})){h=!1;break}}else if(!(b===x||i(b,x,n,r,o))){h=!1;break}}return o.delete(e),o.delete(t),h}function ns(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function rs(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var is=1,os=2,ss="[object Boolean]",as="[object Date]",cs="[object Error]",ls="[object Map]",us="[object Number]",ds="[object RegExp]",fs="[object Set]",hs="[object String]",xs="[object Symbol]",ms="[object ArrayBuffer]",gs="[object DataView]",At=y.Symbol?y.Symbol.prototype:void 0,Ne=At?At.valueOf:void 0;function ps(e,t,n,r,i,o,a){switch(n){case gs:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ms:return!(e.byteLength!=t.byteLength||!o(new Tt(e),new Tt(t)));case ss:case as:case us:return Jt(+e,+t);case cs:return e.name==t.name&&e.message==t.message;case ds:case hs:return e==t+"";case ls:var c=ns;case fs:var l=r&is;if(c||(c=rs),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=os,a.set(e,t);var d=hn(c(e),c(t),r,i,o,a);return a.delete(e),d;case xs:if(Ne)return Ne.call(e)==Ne.call(t)}return!1}var vs=1,bs=Object.prototype,ys=bs.hasOwnProperty;function ws(e,t,n,r,i,o){var a=n&vs,c=vt(e),l=c.length,u=vt(t),d=u.length;if(l!=d&&!a)return!1;for(var f=l;f--;){var h=c[f];if(!(a?h in t:ys.call(t,h)))return!1}var v=o.get(e),b=o.get(t);if(v&&b)return v==t&&b==e;var x=!0;o.set(e,t),o.set(t,e);for(var p=a;++f<l;){h=c[f];var j=e[h],A=t[h];if(r)var _=a?r(A,j,h,t,e,o):r(j,A,h,e,t,o);if(!(_===void 0?j===A||i(j,A,n,r,o):_)){x=!1;break}p||(p=h=="constructor")}if(x&&!p){var C=e.constructor,T=t.constructor;C!=T&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof T=="function"&&T instanceof T)&&(x=!1)}return o.delete(e),o.delete(t),x}var Cs=1,St="[object Arguments]",Et="[object Array]",pe="[object Object]",js=Object.prototype,Pt=js.hasOwnProperty;function Ts(e,t,n,r,i,o){var a=H(e),c=H(t),l=a?Et:K(e),u=c?Et:K(t);l=l==St?pe:l,u=u==St?pe:u;var d=l==pe,f=u==pe,h=l==u;if(h&&Me(e)){if(!Me(t))return!1;a=!0,d=!1}if(h&&!d)return o||(o=new q),a||en(e)?hn(e,t,n,r,i,o):ps(e,t,l,n,r,i,o);if(!(n&Cs)){var v=d&&Pt.call(e,"__wrapped__"),b=f&&Pt.call(t,"__wrapped__");if(v||b){var x=v?e.value():e,p=b?t.value():t;return o||(o=new q),i(x,p,n,r,o)}}return h?(o||(o=new q),ws(e,t,n,r,i,o)):!1}function Ye(e,t,n,r,i){return e===t?!0:e==null||t==null||!y.isObjectLike(e)&&!y.isObjectLike(t)?e!==e&&t!==t:Ts(e,t,n,r,Ye,i)}var As=1,Ss=2;function Es(e,t,n,r){var i=n.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=n[i];var c=a[0],l=e[c],u=a[1];if(a[2]){if(l===void 0&&!(c in e))return!1}else{var d=new q,f;if(!(f===void 0?Ye(u,l,As|Ss,r,d):f))return!1}}return!0}function xn(e){return e===e&&!y.isObject(e)}function Ps(e){for(var t=tn(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,xn(i)]}return t}function mn(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function Os(e){var t=Ps(e);return t.length==1&&t[0][2]?mn(t[0][0],t[0][1]):function(n){return n===e||Es(n,e,t)}}function _s(e,t){return e!=null&&t in Object(e)}function Ns(e,t,n){t=nn(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=Ee(t[r]);if(!(o=e!=null&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&Ue(i)&&Wt(a,i)&&(H(e)||Ve(e)))}function Rs(e,t){return e!=null&&Ns(e,t,_s)}var Is=1,Ms=2;function $s(e,t){return We(e)&&xn(t)?mn(Ee(e),t):function(n){var r=ro(n,e);return r===void 0&&r===t?Rs(n,e):Ye(t,r,Is|Ms)}}function gn(e){return function(t){return t==null?void 0:t[e]}}function Ds(e){return function(t){return rn(t,e)}}function ks(e){return We(e)?gn(Ee(e)):Ds(e)}function Bs(e){return typeof e=="function"?e:e==null?Ge:typeof e=="object"?H(e)?$s(e[0],e[1]):Os(e):ks(e)}function Re(e){return y.isObjectLike(e)&&Xt(e)}var Ls=200;function zs(e,t,n,r){var i=-1,o=_r,a=!0,c=e.length,l=[],u=t.length;if(!c)return l;n&&(t=Vt(t,Ke(n))),t.length>=Ls&&(o=fn,a=!1,t=new de(t));e:for(;++i<c;){var d=e[i],f=n==null?d:n(d);if(d=d!==0?d:0,a&&f===f){for(var h=u;h--;)if(t[h]===f)continue e;l.push(d)}else o(t,f,r)||l.push(d)}return l}function Fs(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Hs=Mr(function(e,t){var n=Fs(t);return Re(n)&&(n=void 0),Re(e)?zs(e,oo(t,1,Re),Bs(n)):[]}),qs="[object RegExp]";function Gs(e){return y.isObjectLike(e)&&y.baseGetTag(e)==qs}var Ot=Te&&Te.isRegExp,Us=Ot?Ke(Ot):Gs,Vs=gn("length"),pn="\\ud800-\\udfff",Ks="\\u0300-\\u036f",Ws="\\ufe20-\\ufe2f",Js="\\u20d0-\\u20ff",Xs=Ks+Ws+Js,Ys="\\ufe0e\\ufe0f",Zs="["+pn+"]",Fe="["+Xs+"]",He="\\ud83c[\\udffb-\\udfff]",Qs="(?:"+Fe+"|"+He+")",vn="[^"+pn+"]",bn="(?:\\ud83c[\\udde6-\\uddff]){2}",yn="[\\ud800-\\udbff][\\udc00-\\udfff]",ea="\\u200d",wn=Qs+"?",Cn="["+Ys+"]?",ta="(?:"+ea+"(?:"+[vn,bn,yn].join("|")+")"+Cn+wn+")*",na=Cn+wn+ta,ra="(?:"+[vn+Fe+"?",Fe,bn,yn,Zs].join("|")+")",_t=RegExp(He+"(?="+He+")|"+ra+na,"g");function ia(e){for(var t=_t.lastIndex=0;_t.test(e);)++t;return t}function oa(e){return Xe(e)?ia(e):Vs(e)}var sa=30,aa="...",ca=/\w*$/;function la(e,t){var n=sa,r=aa;if(y.isObject(t)){var i="separator"in t?t.separator:i;n="length"in t?tr(t.length):n,r="omission"in t?je(t.omission):r}e=$e(e);var o=e.length;if(Xe(e)){var a=No(e);o=a.length}if(n>=o)return e;var c=n-oa(r);if(c<1)return r;var l=a?ao(a,0,c).join(""):e.slice(0,c);if(i===void 0)return l+r;if(a&&(c+=l.length-c),Us(i)){if(e.slice(c).search(i)){var u,d=l;for(i.global||(i=RegExp(i.source,$e(ca.exec(i))+"g")),i.lastIndex=0;u=i.exec(d);)var f=u.index;l=l.slice(0,f===void 0?c:f)}}else if(e.indexOf(je(i),c)!=c){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+r}function Ze(e,t,n){const r=[],i=e.node(0);n=typeof n=="number"&&n>=0?n:e.sameParent(t)?Math.max(0,e.sharedDepth(t.pos)-1):e.sharedDepth(t.pos);const o=new g.NodeRange(e,t,n),a=o.depth===0?0:i.resolve(o.start).posAtIndex(0);return o.parent.forEach((c,l)=>{const u=a+l,d=u+c.nodeSize;if(u<o.start||u>=o.end)return;const f=new g.SelectionRange(i.resolve(u),i.resolve(d));r.push(f)}),r}class Qe{constructor(t,n){xe(this,"anchor");xe(this,"head");this.anchor=t,this.head=n}map(t){return new Qe(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return new F(n,r)}}class F extends g.Selection{constructor(n,r,i,o=1){const{doc:a}=n,c=n===r,l=n.pos===a.content.size&&r.pos===a.content.size,u=c&&!l?a.resolve(r.pos+(o>0?1:-1)):r,d=c&&l?a.resolve(n.pos-(o>0?1:-1)):n,f=Ze(d.min(u),d.max(u),i);super(u.pos>=n.pos?f[0].$from:f[f.length-1].$to,u.pos>=n.pos?f[f.length-1].$to:f[0].$from,f);xe(this,"depth");this.depth=i}get $to(){return this.ranges[this.ranges.length-1].$to}eq(n){return n instanceof F&&n.$from.pos===this.$from.pos&&n.$to.pos===this.$to.pos}map(n,r){const i=n.resolve(r.map(this.anchor)),o=n.resolve(r.map(this.head));return new F(i,o)}toJSON(){return{type:"nodeRange",anchor:this.anchor,head:this.head}}get isForwards(){return this.head>=this.anchor}get isBackwards(){return!this.isForwards}extendBackwards(){const{doc:n}=this.$from;if(this.isForwards&&this.ranges.length>1){const o=this.ranges.slice(0,-1),a=o[0].$from,c=o[o.length-1].$to;return new F(a,c,this.depth)}const r=this.ranges[0],i=n.resolve(Math.max(0,r.$from.pos-1));return new F(this.$anchor,i,this.depth)}extendForwards(){const{doc:n}=this.$from;if(this.isBackwards&&this.ranges.length>1){const o=this.ranges.slice(1),a=o[0].$from,c=o[o.length-1].$to;return new F(c,a,this.depth)}const r=this.ranges[this.ranges.length-1],i=n.resolve(Math.min(n.content.size,r.$to.pos+1));return new F(this.$anchor,i,this.depth)}static fromJSON(n,r){return new F(n.resolve(r.anchor),n.resolve(r.head))}static create(n,r,i,o,a=1){return new this(n.resolve(r),n.resolve(i),o,a)}getBookmark(){return new Qe(this.anchor,this.head)}}function ua(e){const t=e.cloneNode(!0),n=[e,...Array.from(e.getElementsByTagName("*"))],r=[t,...Array.from(t.getElementsByTagName("*"))];return n.forEach((i,o)=>{r[o].style.cssText=function(a){let c="";const l=getComputedStyle(a);for(let u=0;u<l.length;u+=1)c+=`${l[u]}:${l.getPropertyValue(l[u])};`;return c}(i)}),t}function ve(e,t){return window.getComputedStyle(e)[t]}function da(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Nt(e){e.parentNode!==null&&e.parentNode!==void 0&&e.parentNode.removeChild(e)}function jn(e){const{x:t,y:n,direction:r,editor:i}=e;let o=null,a=null,c=null,l=t;for(;a===null&&l<window.innerWidth&&l>0;){const u=document.elementsFromPoint(l,n),d=u.findIndex(h=>h.classList.contains("ProseMirror")),f=u.slice(0,d);if(f.length>0){const h=f[0];if(o=h,c=i.view.posAtDOM(h,0),c>=0){a=i.state.doc.nodeAt(Math.max(c-1,0)),(a===null||a.isText)&&(a=i.state.doc.nodeAt(Math.max(c-1,0))),a||(a=i.state.doc.nodeAt(Math.max(c,0)));break}}r==="left"?l-=1:l+=1}return{resultElement:o,resultNode:a,pos:c!==null?c:null}}function fa(e,t){const{doc:n}=t.view.state,r=jn({editor:t,x:e.clientX,y:e.clientY,direction:"right"});if(!r.resultNode||r.pos===null)return[];const i=e.clientX,o=function(d,f,h){const v=Number.parseInt(ve(d.dom,"paddingLeft"),10),b=Number.parseInt(ve(d.dom,"paddingRight"),10),x=Number.parseInt(ve(d.dom,"borderLeftWidth"),10),p=Number.parseInt(ve(d.dom,"borderLeftWidth"),10),j=d.dom.getBoundingClientRect();return{left:da(f,j.left+v+x,j.right-b-p),top:h}}(t.view,i,e.clientY),a=t.view.posAtCoords(o);if(!a)return[];const{pos:c}=a;if(!n.resolve(c).parent)return[];const l=n.resolve(r.pos),u=n.resolve(r.pos+1);return Ze(l,u,0)}function Rt(e,t){const n=e.resolve(t),{depth:r}=n;return r===0?t:n.pos-n.parentOffset-1}function It(e,t){const n=e.nodeAt(t),r=e.resolve(t);let{depth:i}=r,o=n;for(;i>0;){const a=r.node(i);i-=1,i===0&&(o=a)}return o}function Mt(e,t){let n=t;for(;n&&n.parentNode&&n.parentNode!==e.dom;)n=n.parentNode;return n}const Tn=new g.PluginKey("dragHandle");function ha({pluginKey:e=Tn,element:t,editor:n,tippyOptions:r,onNodeChange:i}){const o=document.createElement("div");let a=null,c=!1,l=null,u=-1;return t.addEventListener("dragstart",d=>{const{view:f}=n;if(!d.dataTransfer)return;const{empty:h,$from:v,$to:b}=f.state.selection,x=fa(d,n),p=Ze(v,b,0),j=p.some(L=>x.find($=>$.$from===L.$from&&$.$to===L.$to)),A=h||!j?x:p;if(A.length===0)return;const{tr:_}=f.state,C=document.createElement("div"),T=A[0].$from.pos,M=A[A.length-1].$to.pos,B=F.create(f.state.doc,T,M),D=B.content();A.forEach(L=>{const $=ua(f.nodeDOM(L.$from.pos));C.append($)}),C.style.position="absolute",C.style.top="-10000px",document.body.append(C),d.dataTransfer.clearData(),d.dataTransfer.setDragImage(C,0,0),f.dragging={slice:D,move:!0},_.setSelection(B),f.dispatch(_),document.addEventListener("drop",()=>Nt(C),{once:!0}),setTimeout(()=>{t&&(t.style.pointerEvents="none")},0)}),t.addEventListener("dragend",()=>{t&&(t.style.pointerEvents="auto")}),new g.Plugin({key:typeof e=="string"?new g.PluginKey(e):e,state:{init:()=>({locked:!1}),apply(d,f){const h=d.getMeta("lockDragHandle"),v=d.getMeta("hideDragHandle");if(h!==void 0&&(c=h),v&&a)return a.hide(),c=!1,l=null,u=-1,i==null||i({editor:n,node:null,pos:-1}),f;if(d.docChanged&&u!==-1&&t&&a){const b=d.mapping.map(u);b!==u&&(u=b)}return f}},view:d=>{return f(),h(n.view.dom),a=qt(d.dom,{...v(),...r}),{update(C,T){if(!b(t,a)||(t.draggable=!c,!x(C,T)))return;const M=p(C);M&&j(C,M)},destroy(){_()}};function f(){t.draggable=!0,t.style.pointerEvents="auto"}function h(C){var T;(T=C.parentElement)==null||T.appendChild(o),o.appendChild(t),Object.assign(o.style,{pointerEvents:"none",position:"absolute",top:"0",left:"0"})}function v(){return{getReferenceClientRect:null,interactive:!0,trigger:"manual",placement:"left-start",hideOnClick:!1,duration:100,zIndex:10,appendTo:o,content:t,popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",options:{rootBoundary:"document",mainAxis:!1}}]}}}function b(C,T){return C&&T}function x(C,T){return!C.state.doc.eq(T.doc)&&u!==-1}function p(C){let T=C.nodeDOM(u);return T=Mt(C,T),T===C.dom||(T==null?void 0:T.nodeType)!==1?null:T}function j(C,T){const M=C.posAtDOM(T,0),B=It(n.state.doc,M);if(B===l)return;const D=Rt(n.state.doc,M);l=B,u=D,i==null||i({editor:n,node:l,pos:u}),A(T)}function A(C){a.setProps({getReferenceClientRect:()=>C.getBoundingClientRect()}),a.show()}function _(){a==null||a.destroy(),t&&Nt(o)}},props:{handleDOMEvents:{mouseleave:(d,f)=>{if(c||!h(f))return!1;return v(),b(),!1;function h(x){return x.target&&!o.contains(x.relatedTarget)}function v(){a==null||a.hide()}function b(){l=null,u=-1,i==null||i({editor:n,node:null,pos:-1})}},mousemove:y.debounce((d,f)=>{if(!t||!a||c)return!1;const h=jn({x:f.clientX,y:f.clientY,direction:"right",editor:n});if(!h.resultElement||h.resultElement===d.dom)return!1;const v=Mt(d,h.resultElement);if(v===d.dom||(v==null?void 0:v.nodeType)!==1)return!1;const b=d.posAtDOM(v,0),x=It(n.state.doc,b);if(x===l)return!1;const p=Rt(n.state.doc,b);return l=x,u=p,i==null||i({editor:n,node:l,pos:u}),a.setProps({getReferenceClientRect:()=>v.getBoundingClientRect()}),a.show(),!1},100)}}})}function xa(e){var D,L,$;const{pluginKey:t=Tn}=e,{t:n}=N.useLocale(),[r,i]=m.useState(null),[o,a]=m.useState(-1),c=m.useRef(null),l=m.useRef(null),[u,d]=m.useState(!1),f=e.editor.extensionManager.extensions.some(w=>w.name==="textAlign"),h=e.editor.extensionManager.extensions.some(w=>w.name==="indent"),v=e.editor.extensionManager.extensions.some(w=>w.name==="clear");m.useEffect(()=>{c.current&&!e.editor.isDestroyed&&(l.current=ha({editor:e.editor,element:c.current,pluginKey:"ContentItemMenu",tippyOptions:{offset:[-2,16],zIndex:99,moveTransition:"transform 0.15s ease-out"},onNodeChange:T}),e.editor.registerPlugin(l.current))},[e.editor,c]);function b(){const w=e.editor.chain();w.setNodeSelection(o).unsetAllMarks(),(r==null?void 0:r.type.name)!=="paragraph"&&w.setParagraph(),w.run()}function x(){e.editor.chain().focus().setNodeSelection(o).run(),document.execCommand("copy")}function p(){e.editor.commands.setNodeSelection(o);const{$anchor:w}=e.editor.state.selection,V=w.node(1)||e.editor.state.selection.node;e.editor.chain().setMeta("hideDragHandle",!0).insertContentAt(o+((r==null?void 0:r.nodeSize)||0),V.toJSON()).run()}function j(w){e.editor.commands.setTextAlign(w)}function A(){const w=me.setNodeIndentMarkup(e.editor.state.tr,o,1);w.setMeta("hideDragHandle",!0),e.editor.view.dispatch&&e.editor.view.dispatch(w)}function _(){const w=me.setNodeIndentMarkup(e.editor.state.tr,o,-1);e.editor.view.dispatch&&e.editor.view.dispatch(w)}function C(){e.editor.chain().setMeta("hideDragHandle",!0).setNodeSelection(o).deleteSelection().run()}function T(w){w.node&&i(w.node),a(w.pos)}function M(){var w;if(o!==-1){const V=(r==null?void 0:r.nodeSize)||0,se=o+V,J=(r==null?void 0:r.type.name)==="paragraph"&&((w=r==null?void 0:r.content)==null?void 0:w.size)===0,he=J?o+2:se+2;e.editor.chain().command(({dispatch:X,tr:te,state:z})=>X?(J?te.insertText("/",o,o+1):te.insert(se,z.schema.nodes.paragraph.create(null,[z.schema.text("/")])),X(te)):!0).focus(he).run()}}m.useEffect(()=>(u?e.editor.commands.setMeta("lockDragHandle",!0):e.editor.commands.setMeta("lockDragHandle",!1),()=>{e.editor.commands.setMeta("lockDragHandle",!1)}),[u]),m.useEffect(()=>()=>{l.current&&(e.editor.unregisterPlugin(t),l.current=null)},[]),m.useEffect(()=>{var w;(w=e.editor)!=null&&w.isDestroyed&&l.current&&(e.editor.unregisterPlugin(t),l.current=null)},[(D=e.editor)==null?void 0:D.isDestroyed]);const B=w=>{e!=null&&e.disabled||d(w)};return s.jsx("div",{ref:c,className:`drag-handle richtext-duration-200 richtext-ease-in-out [transition-property:top,_left] ${e==null?void 0:e.className}`,style:{opacity:e!=null&&e.disabled?0:1},children:s.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-0.5 richtext-duration-200 richtext-ease-in-out [transition-property:top,_left]",children:[s.jsx(ye.Button,{className:"!richtext-size-7 richtext-cursor-grab",disabled:e==null?void 0:e.disabled,onClick:M,size:"icon",type:"button",variant:"ghost",children:s.jsx(R.IconComponent,{className:"richtext-text-lg richtext-text-neutral-600 dark:richtext-text-neutral-200",name:"Plus"})}),s.jsxs(P.DropdownMenu,{onOpenChange:B,open:u,children:[s.jsxs("div",{className:"richtext-relative richtext-flex richtext-flex-col",children:[s.jsxs(ae.Tooltip,{children:[s.jsx(ae.TooltipTrigger,{asChild:!0,disabled:e==null?void 0:e.disabled,children:s.jsx(ye.Button,{className:"richtext-relative richtext-z-[1] !richtext-size-7 richtext-cursor-grab",disabled:e==null?void 0:e.disabled,size:"icon",type:"button",variant:"ghost",onMouseUp:w=>{w.preventDefault(),!(e!=null&&e.disabled)&&d(!0)},children:s.jsx(R.IconComponent,{className:"richtext-text-sm richtext-text-neutral-600 dark:richtext-text-neutral-200",name:"Grip"})})}),s.jsx(ae.TooltipContent,{children:n("editor.draghandle.tooltip")})]}),s.jsx(P.DropdownMenuTrigger,{className:"richtext-absolute richtext-left-0 richtext-top-0 richtext-z-0 richtext-size-[28px]"})]}),s.jsxs(P.DropdownMenuContent,{align:"start",className:"richtext-w-48",side:"bottom",sideOffset:0,children:[s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3 richtext-bg-opacity-10 hover:richtext-bg-red-400 hover:richtext-bg-opacity-20 focus:richtext-bg-red-400 focus:richtext-bg-opacity-30 focus:richtext-text-red-500 dark:hover:richtext-bg-opacity-20 dark:hover:richtext-text-red-500",onClick:C,children:[s.jsx(R.IconComponent,{name:"Trash2"}),s.jsx("span",{children:n("editor.remove")})]}),v?s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3",onClick:b,children:[s.jsx(R.IconComponent,{name:"PaintRoller"}),s.jsx("span",{children:n("editor.clear.tooltip")})]}):null,s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3",onClick:x,children:[s.jsx(R.IconComponent,{name:"Clipboard"}),s.jsx("span",{children:n("editor.copyToClipboard")})]}),s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3",onClick:p,children:[s.jsx(R.IconComponent,{name:"Copy"}),s.jsx("span",{children:n("editor.copy")})]}),f||h?s.jsx(P.DropdownMenuSeparator,{}):null,f?s.jsxs(P.DropdownMenuSub,{children:[s.jsxs(P.DropdownMenuSubTrigger,{className:"richtext-flex richtext-gap-3",children:[s.jsx(R.IconComponent,{name:"AlignCenter"}),s.jsx("span",{children:n("editor.textalign.tooltip")})]}),s.jsx(P.DropdownMenuPortal,{children:s.jsxs(P.DropdownMenuSubContent,{children:[s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3",onClick:()=>j("left"),children:[s.jsx(R.IconComponent,{name:"AlignLeft"}),s.jsx("span",{children:n("editor.textalign.left.tooltip")})]}),s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3",onClick:()=>j("center"),children:[s.jsx(R.IconComponent,{name:"AlignCenter"}),s.jsx("span",{children:n("editor.textalign.center.tooltip")})]}),s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3",onClick:()=>j("right"),children:[s.jsx(R.IconComponent,{name:"AlignRight"}),s.jsx("span",{children:n("editor.textalign.right.tooltip")})]})]})})]}):null,h?s.jsxs(P.DropdownMenuSub,{children:[s.jsxs(P.DropdownMenuSubTrigger,{className:"richtext-flex richtext-gap-3",children:[s.jsx(R.IconComponent,{name:"IndentIncrease"}),s.jsx("span",{children:n("editor.indent")})]}),s.jsx(P.DropdownMenuPortal,{children:s.jsxs(P.DropdownMenuSubContent,{children:[s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3",disabled:((L=r==null?void 0:r.attrs)==null?void 0:L.indent)>=me.IndentProps.max,onClick:A,children:[s.jsx(R.IconComponent,{name:"IndentIncrease"}),s.jsx("span",{children:n("editor.indent.tooltip")})]}),s.jsxs(P.DropdownMenuItem,{className:"richtext-flex richtext-gap-3",disabled:(($=r==null?void 0:r.attrs)==null?void 0:$.indent)<=me.IndentProps.min,onClick:_,children:[s.jsx(R.IconComponent,{name:"IndentDecrease"}),s.jsx("span",{children:n("editor.outdent.tooltip")})]})]})})]}):null]})]})]})})}const ma={maxWidth:"auto",zIndex:20,appendTo:"parent",moveTransition:"transform 0.1s ease-out"};function ga({item:e,disabled:t,editor:n}){var i;const r=e.component;return r?s.jsx(r,{...e.componentProps,disabled:t||((i=e==null?void 0:e.componentProps)==null?void 0:i.disabled),editor:n}):s.jsx(s.Fragment,{})}function pa(e){const{t,lang:n}=N.useLocale(),r=({editor:o})=>{const{selection:a}=o.view.state,{$from:c,to:l}=a;return c.pos===l?!1:a instanceof g.TextSelection},i=m.useMemo(()=>e.disabled||!(e!=null&&e.editor)?[]:fe.getBubbleText(e.editor,t),[e.disabled,e.editor,n,t]);return s.jsx(k.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:r,tippyOptions:ma,children:i!=null&&i.length?s.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:s.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-gap-[4px] richtext-whitespace-nowrap",children:i==null?void 0:i.map((o,a)=>(o==null?void 0:o.type)==="divider"?s.jsx(W.Separator,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"},`bubbleMenu-divider-${a}`):s.jsx(ga,{disabled:e.disabled,editor:e.editor,item:o},`bubbleMenu-text-${a}`))})}):s.jsx(s.Fragment,{})})}function va({editor:e,disabled:t,actions:n}){var p,j,A,_,C,T,M,B,D,L,$,w,V,se,J,he,X,te;const r=({editor:z})=>g.isActive(z.view.state,"table"),{t:i}=N.useLocale();function o(){e.chain().focus().addColumnBefore().run()}function a(){e.chain().focus().addColumnAfter().run()}function c(){e.chain().focus().deleteColumn().run()}function l(){e.chain().focus().addRowBefore().run()}function u(){e.chain().focus().addRowAfter().run()}function d(){e.chain().focus().deleteRow().run()}function f(){e.chain().focus().mergeCells().run()}function h(){e==null||e.chain().focus().splitCell().run()}function v(){e.chain().focus().deleteTable().run()}function b(z){e.chain().focus().setTableCellBackground(z).run()}const x=()=>{var ot;const{view:z,state:{selection:{from:Pe}}}=e,ne=z.domAtPos(Pe).node;if(!ne)return new DOMRect(-1e3,-1e3,0,0);const it=(ot=ne==null?void 0:ne.closest)==null?void 0:ot.call(ne,".tableWrapper");return it?it.getBoundingClientRect():new DOMRect(-1e3,-1e3,0,0)};return s.jsx(k.BubbleMenu,{editor:e,pluginKey:"table",shouldShow:r,updateDelay:0,tippyOptions:{offset:[0,8],popperOptions:{modifiers:[{name:"flip",enabled:!1}]},maxWidth:"auto",getReferenceClientRect:x,plugins:[qt.sticky],sticky:"popper"},children:t?s.jsx(s.Fragment,{}):s.jsxs("div",{className:"richtext-flex richtext-size-full richtext-min-w-32 richtext-flex-row richtext-items-center richtext-gap-0.5 richtext-rounded-lg !richtext-border richtext-border-border richtext-bg-background richtext-p-2 richtext-leading-none richtext-shadow-sm",children:[s.jsx(O.ActionButton,{action:o,disabled:!((j=(p=e==null?void 0:e.can())==null?void 0:p.addColumnBefore)!=null&&j.call(p)),icon:"BetweenHorizonalEnd",tooltip:i("editor.table.menu.insertColumnBefore"),"tooltip-options":{sideOffset:15}}),s.jsx(O.ActionButton,{action:a,disabled:!((_=(A=e==null?void 0:e.can())==null?void 0:A.addColumnAfter)!=null&&_.call(A)),icon:"BetweenHorizonalStart",tooltip:i("editor.table.menu.insertColumnAfter"),"tooltip-options":{sideOffset:15}}),s.jsx(O.ActionButton,{action:c,disabled:!((T=e==null?void 0:(C=e.can()).deleteColumn)!=null&&T.call(C)),icon:"DeleteColumn",tooltip:i("editor.table.menu.deleteColumn"),"tooltip-options":{sideOffset:15}}),s.jsx(W.Separator,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}),s.jsx(O.ActionButton,{action:l,disabled:!((B=e==null?void 0:(M=e.can()).addRowBefore)!=null&&B.call(M)),icon:"BetweenVerticalEnd",tooltip:i("editor.table.menu.insertRowAbove"),"tooltip-options":{sideOffset:15}}),s.jsx(O.ActionButton,{action:u,disabled:!((L=(D=e==null?void 0:e.can())==null?void 0:D.addRowAfter)!=null&&L.call(D)),icon:"BetweenVerticalStart",tooltip:i("editor.table.menu.insertRowBelow"),"tooltip-options":{sideOffset:15}}),s.jsx(O.ActionButton,{action:d,disabled:!((w=($=e==null?void 0:e.can())==null?void 0:$.deleteRow)!=null&&w.call($)),icon:"DeleteRow",tooltip:i("editor.table.menu.deleteRow"),"tooltip-options":{sideOffset:15}}),s.jsx(W.Separator,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}),s.jsx(O.ActionButton,{action:f,disabled:!((se=(V=e==null?void 0:e.can())==null?void 0:V.mergeCells)!=null&&se.call(V)),icon:"TableCellsMerge",tooltip:i("editor.table.menu.mergeCells"),"tooltip-options":{sideOffset:15}}),s.jsx(O.ActionButton,{action:h,disabled:!((he=(J=e==null?void 0:e.can())==null?void 0:J.splitCell)!=null&&he.call(J)),icon:"TableCellsSplit",tooltip:i("editor.table.menu.splitCells"),"tooltip-options":{sideOffset:15}}),s.jsx(W.Separator,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}),s.jsx(kn.HighlightActionButton,{action:b,editor:e,tooltip:i("editor.table.menu.setCellsBgColor"),tooltipOptions:{sideOffset:15}}),s.jsx(O.ActionButton,{action:v,disabled:!((te=(X=e==null?void 0:e.can())==null?void 0:X.deleteTable)!=null&&te.call(X)),icon:"Trash2",tooltip:i("editor.table.menu.deleteTable"),"tooltip-options":{sideOffset:15}}),n&&n.map((z,Pe)=>s.jsx(O.ActionButton,{...z},Pe))]})})}function ba(e){const{t}=N.useLocale();return s.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-2 richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800",children:[s.jsx("a",{href:e==null?void 0:e.link,target:"_blank",rel:"noopener noreferrer",className:"richtext-text-sm richtext-underline richtext-break-all",children:la(e==null?void 0:e.link,{length:50,omission:"…"})}),(e==null?void 0:e.link)&&s.jsx(W.Separator,{orientation:"vertical",className:"!richtext-h-4"}),s.jsxs("div",{className:"richtext-flex richtext-flex-nowrap",children:[s.jsx(O.ActionButton,{icon:"Pencil",tooltip:t("editor.link.edit.tooltip"),action:()=>{e==null||e.onEdit()},tooltipOptions:{sideOffset:15}}),s.jsx(O.ActionButton,{icon:"Unlink",tooltip:t("editor.link.unlink.tooltip"),action:()=>{e==null||e.onClear()},tooltipOptions:{sideOffset:15}})]})]})}function ya({editor:e,disabled:t}){const[n,r]=m.useState(!1),i=m.useMemo(()=>{const{href:l}=e.getAttributes("link");return l},[e]),o=m.useCallback(({editor:l})=>l.isActive("link"),[]),a=(l,u,d)=>{const f=e.state.selection,{from:h}=f,v=(u==null?void 0:u.length)??0,b=h+v;e.chain().extendMarkRange("link").insertContent({type:"text",text:u,marks:[{type:"link",attrs:{href:l,target:d?"_blank":""}}]}).setLink({href:l}).setTextSelection({from:h,to:b}).focus().run(),r(!1)},c=m.useCallback(()=>{e.chain().extendMarkRange("link").unsetLink().focus().run(),r(!1)},[e]);return s.jsx(s.Fragment,{children:s.jsx(k.BubbleMenu,{editor:e,shouldShow:o,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999,onHidden:()=>{r(!1)}},children:t?s.jsx(s.Fragment,{}):s.jsx(s.Fragment,{children:n?s.jsx(Bn.LinkEditBlock,{onSetLink:a,editor:e}):s.jsx(ba,{editor:e,onClear:c,onEdit:()=>{r(!0)},link:i})})})})}const et={maxWidth:"auto",zIndex:20,appendTo:"parent",moveTransition:"transform 0.1s ease-out"};function tt({item:e,disabled:t,editor:n}){var i;const r=e.component;return r?s.jsx(m.Fragment,{children:e.type==="divider"?s.jsx(W.Separator,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}):s.jsx(r,{...e.componentProps,disabled:t||((i=e==null?void 0:e.componentProps)==null?void 0:i.disabled),editor:n})}):s.jsx(s.Fragment,{})}function wa(e){return e.type.name===Ft.Image.name}function Ca(e){return e.type.name===Ht.ImageGif.name}function ja(e){return e.type.name===Ln.Video.name}function Ta(e){const{lang:t}=N.useLocale(),n=({editor:i})=>{const{selection:o}=i.view.state,{$from:a,to:c}=o;let l=!1;return i.view.state.doc.nodesBetween(a.pos,c,u=>{if(wa(u))return l=!0,!1}),l},r=m.useMemo(()=>e.disabled?[]:fe.getBubbleImage(e.editor),[e.disabled,e.editor,t]);return s.jsx(s.Fragment,{children:s.jsx(k.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:n,tippyOptions:et,children:r!=null&&r.length?s.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:s.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap",children:r==null?void 0:r.map((i,o)=>s.jsx(tt,{disabled:e.disabled,editor:e.editor,item:i},`bubbleMenu-image-${o}`))})}):s.jsx(s.Fragment,{})})})}function Aa(e){const{lang:t}=N.useLocale(),n=({editor:i})=>{const{selection:o}=i.view.state,{$from:a,to:c}=o;let l=!1;return i.view.state.doc.nodesBetween(a.pos,c,u=>{if(Ca(u))return l=!0,!1}),l},r=m.useMemo(()=>e.disabled?[]:fe.getBubbleImageGif(e.editor),[e.disabled,e.editor,t]);return s.jsx(s.Fragment,{children:s.jsx(k.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:n,tippyOptions:et,children:r!=null&&r.length?s.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:s.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap",children:r==null?void 0:r.map((i,o)=>s.jsx(tt,{disabled:e.disabled,editor:e.editor,item:i},`bubbleMenu-image-gif-${o}`))})}):s.jsx(s.Fragment,{})})})}function Sa(e){const{lang:t}=N.useLocale(),n=({editor:i})=>{const{selection:o}=i.view.state,{$from:a,to:c}=o;let l=!1;return i.view.state.doc.nodesBetween(a.pos,c,u=>{if(ja(u))return l=!0,!1}),l},r=m.useMemo(()=>e.disabled?[]:fe.getBubbleVideo(e.editor),[e.editor,e.disabled,t]);return s.jsx(s.Fragment,{children:s.jsx(k.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:n,tippyOptions:et,children:r!=null&&r.length?s.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:s.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap",children:r==null?void 0:r.map((i,o)=>s.jsx(tt,{disabled:e.disabled,editor:e.editor,item:i},`bubbleMenu-video-${o}`))})}):s.jsx(s.Fragment,{})})})}function Ea({editor:e}){const{t}=N.useLocale(),n=m.useCallback(()=>e.isActive(we.MultiColumn.name),[e]),r=m.useCallback(()=>zt.deleteNode(we.MultiColumn.name,e),[e]),i=m.useCallback(()=>e.chain().focus().addColBefore().run(),[e]),o=m.useCallback(()=>e.chain().focus().addColAfter().run(),[e]),a=m.useCallback(()=>e.chain().focus().deleteCol().run(),[e]);return s.jsx(k.BubbleMenu,{editor:e,pluginKey:"columns-bubble-menu",shouldShow:n,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999},children:s.jsxs("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:[s.jsx(O.ActionButton,{action:i,icon:"ColumnAddLeft",tooltip:t("editor.table.menu.insertColumnBefore")}),s.jsx(O.ActionButton,{action:o,icon:"ColumnAddRight",tooltip:t("editor.table.menu.insertColumnAfter")}),s.jsx(O.ActionButton,{action:a,icon:"DeleteColumn",tooltip:t("editor.table.menu.deleteColumn")}),s.jsx(O.ActionButton,{action:r,icon:"Trash2",tooltip:t("editor.table.menu.delete_column")})]})})}const Pa=I.Provider,An=oe.forwardRef(({className:e,...t},n)=>s.jsx(I.Viewport,{ref:n,className:Z.cn("richtext-fixed richtext-top-0 richtext-z-[100] richtext-flex richtext-max-h-screen richtext-w-full richtext-flex-col-reverse richtext-p-4 sm:richtext-bottom-0 sm:richtext-right-0 sm:richtext-top-auto sm:richtext-flex-col md:richtext-max-w-[420px]",e),...t}));An.displayName=I.Viewport.displayName;const Oa=Z.cva("richtext-group richtext-pointer-events-auto richtext-relative richtext-flex richtext-w-full richtext-items-center richtext-justify-between richtext-space-x-4 richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-p-6 richtext-pr-8 richtext-shadow-lg richtext-transition-all data-[swipe=cancel]:richtext-translate-x-0 data-[swipe=end]:richtext-translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:richtext-translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:richtext-transition-none data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[swipe=end]:richtext-animate-out data-[state=closed]:richtext-fade-out-80 data-[state=closed]:richtext-slide-out-to-right-full data-[state=open]:richtext-slide-in-from-top-full data-[state=open]:sm:richtext-slide-in-from-bottom-full",{variants:{variant:{default:"richtext-border richtext-bg-background richtext-text-foreground",destructive:"richtext-destructive richtext-group richtext-border-destructive richtext-bg-destructive richtext-text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Sn=oe.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(I.Root,{ref:r,className:Z.cn(Oa({variant:t}),e),...n}));Sn.displayName=I.Root.displayName;const _a=oe.forwardRef(({className:e,...t},n)=>s.jsx(I.Action,{ref:n,className:Z.cn("richtext-inline-flex richtext-h-8 richtext-shrink-0 richtext-items-center richtext-justify-center richtext-rounded-md !richtext-border richtext-bg-transparent richtext-px-3 richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors hover:richtext-bg-secondary focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 group-[.destructive]:richtext-border-muted/40 group-[.destructive]:hover:richtext-border-destructive/30 group-[.destructive]:hover:richtext-bg-destructive group-[.destructive]:hover:richtext-text-destructive-foreground group-[.destructive]:focus:richtext-ring-destructive",e),...t}));_a.displayName=I.Action.displayName;const En=oe.forwardRef(({className:e,...t},n)=>s.jsx(I.Close,{ref:n,className:Z.cn("richtext-absolute richtext-right-2 richtext-top-2 richtext-rounded-md richtext-p-1 richtext-text-foreground/50 richtext-opacity-0 richtext-transition-opacity hover:richtext-text-foreground focus:richtext-opacity-100 focus:richtext-outline-none focus:richtext-ring-2 group-hover:richtext-opacity-100 group-[.destructive]:richtext-text-red-300 group-[.destructive]:hover:richtext-text-red-50 group-[.destructive]:focus:richtext-ring-red-400 group-[.destructive]:focus:richtext-ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Fn.X,{className:"richtext-h-4 richtext-w-4"})}));En.displayName=I.Close.displayName;const Pn=oe.forwardRef(({className:e,...t},n)=>s.jsx(I.Title,{ref:n,className:Z.cn("richtext-text-sm richtext-font-semibold",e),...t}));Pn.displayName=I.Title.displayName;const On=oe.forwardRef(({className:e,...t},n)=>s.jsx(I.Description,{ref:n,className:Z.cn("richtext-text-sm richtext-opacity-90",e),...t}));On.displayName=I.Description.displayName;function Na({editor:e}){const{t}=N.useLocale(),{width:n,height:r,src:i}=Lt.useAttributes(e,ie.Iframe.name,{width:0,height:0,src:"",defaultShowPicker:!1}),[o,a]=m.useState(!1),[c,l]=m.useState(""),u=m.useCallback(()=>{a(!1)},[a]);m.useEffect(()=>{o&&l(i)},[o,i]);const d=m.useCallback(()=>{const p=ie.getServiceSrc(c);e.chain().updateAttributes(ie.Iframe.name,{src:(p==null?void 0:p.src)||c}).setNodeSelection(e.state.selection.from).focus().run(),a(!1)},[e,c,a]),f=m.useCallback(()=>{window.open(i,"_blank")},[i]),h=m.useCallback(()=>{a(!0)},[a]),v=m.useCallback(p=>{e.chain().updateAttributes(ie.Iframe.name,p).setNodeSelection(e.state.selection.from).focus().run()},[e]),b=m.useCallback(()=>e.isActive(ie.Iframe.name)&&!i,[e,i]),x=m.useCallback(()=>zt.deleteNode(ie.Iframe.name,e),[e]);return s.jsxs(s.Fragment,{children:[s.jsx(k.BubbleMenu,{className:"bubble-menu",editor:e,pluginKey:"iframe-bubble-menu",shouldShow:b,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999},children:s.jsxs("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:[s.jsx(O.ActionButton,{action:f,icon:"Eye",tooltip:"Visit Link"}),s.jsx(O.ActionButton,{action:h,icon:"Pencil",tooltip:"Open Edit Link"}),s.jsx(fe.SizeSetter,{height:r,onOk:v,width:n,children:s.jsx(O.ActionButton,{icon:"Settings",tooltip:t("editor.settings")})}),s.jsx(O.ActionButton,{action:x,icon:"Trash2",tooltip:t("editor.delete")})]})}),s.jsxs(re.Dialog,{onOpenChange:a,open:o,children:[s.jsx(re.DialogTrigger,{}),s.jsxs(re.DialogContent,{children:[s.jsx(re.DialogHeader,{children:s.jsx(re.DialogTitle,{children:"Edit Link Iframe"})}),s.jsx(Dn.Input,{autoFocus:!0,onInput:p=>l(p.target.value),placeholder:"Enter link",type:"url",value:c}),s.jsxs(re.DialogFooter,{children:[s.jsx(ye.Button,{onClick:u,children:"Cancel"}),s.jsx(ye.Button,{onClick:d,children:"OK"})]})]})]})]})}function Ra({editor:e,disabled:t,bubbleMenu:n}){const r=e.extensionManager.extensions.map(o=>o.name),i=()=>{var o,a,c,l,u,d,f,h,v,b;return[r.includes("columns")&&!((o=n==null?void 0:n.columnConfig)!=null&&o.hidden)?s.jsx(Ea,{editor:e},"columns"):null,r.includes("table")&&!((a=n==null?void 0:n.tableConfig)!=null&&a.hidden)?s.jsx(va,{actions:(c=n==null?void 0:n.tableConfig)==null?void 0:c.actions,editor:e},"table"):null,r.includes("link")&&!((l=n==null?void 0:n.linkConfig)!=null&&l.hidden)?s.jsx(ya,{disabled:t,editor:e},"link"):null,r.includes(Ft.Image.name)&&!((u=n==null?void 0:n.imageConfig)!=null&&u.hidden)?s.jsx(Ta,{disabled:t,editor:e},"image"):null,r.includes(Ht.ImageGif.name)&&!((d=n==null?void 0:n.imageGifConfig)!=null&&d.hidden)?s.jsx(Aa,{disabled:t,editor:e},"imageGif"):null,r.includes("video")&&!((f=n==null?void 0:n.videoConfig)!=null&&f.hidden)?s.jsx(Sa,{disabled:t,editor:e},"video"):null,r.includes("iframe")&&!((h=n==null?void 0:n.iframeConfig)!=null&&h.hidden)?s.jsx(Na,{disabled:t,editor:e},"iframe"):null,(v=n==null?void 0:n.floatingMenuConfig)!=null&&v.hidden?null:s.jsx(xa,{disabled:t,editor:e},"content"),(b=n==null?void 0:n.textConfig)!=null&&b.hidden?null:s.jsx(pa,{disabled:t,editor:e},"text")]};return n!=null&&n.render?n.render({editor:e,disabled:t||!1,extensionsNames:r,bubbleMenu:n},i()):i().filter(Boolean)}function Ia({editor:e,disabled:t,toolbar:n}){const{t:r,lang:i}=N.useLocale(),o=m.useMemo(()=>{const u=[...e.extensionManager.extensions].sort((f,h)=>{const v=f.options.sort??-1,b=h.options.sort??-1;return v-b});let d=[];for(const f of u){const{button:h,divider:v=!1,spacer:b=!1,toolbar:x=!0}=f.options;if(!h||!Gt.isFunction(h)||!x)continue;const p=h({editor:e,extension:f,t:r});if(Array.isArray(p)){const j=p.map((A,_)=>({button:A,divider:_===p.length-1?v:!1,spacer:_===0?b:!1,type:f.type,name:f.name}));d=[...d,...j];continue}d.push({button:p,divider:v,spacer:b,type:f.type,name:f.name})}return d},[e,r,i]),a=l=>s.jsx("div",{className:"richtext-px-1 richtext-py-2 !richtext-border-b",style:{pointerEvents:t?"none":"auto",opacity:t?.5:1},children:s.jsx("div",{className:"richtext-relative richtext-flex richtext-flex-wrap richtext-h-auto richtext-gap-y-1 richtext-gap-x-1",children:l})}),c=o.map((l,u)=>{var f,h;const d=l.button.component;return s.jsxs("div",{className:"richtext-flex richtext-items-center",children:[(l==null?void 0:l.spacer)&&s.jsx(W.Separator,{orientation:"vertical",className:"!richtext-h-[16px] !richtext-mx-[10px]"}),s.jsx(d,{...l.button.componentProps,disabled:t||((h=(f=l==null?void 0:l.button)==null?void 0:f.componentProps)==null?void 0:h.disabled)}),(l==null?void 0:l.divider)&&s.jsx(W.Separator,{orientation:"vertical",className:"!richtext-h-auto !richtext-mx-2"})]},`toolbar-item-${u}`)});return n&&(n!=null&&n.render)?n.render({editor:e,disabled:t||!1},o,c,a):a(c)}function Ma({editor:e,extensions:t}){const{t:n}=N.useLocale(),r=m.useMemo(()=>{var i,o,a;return(a=(o=(i=t==null?void 0:t.find(c=>c.name==="base-kit"))==null?void 0:i.options)==null?void 0:o.characterCount)==null?void 0:a.limit},[t]);return r?s.jsx("div",{className:"richtext-flex richtext-items-center richtext-justify-between richtext-p-3 richtext-border-t",children:s.jsx("div",{className:"richtext-flex richtext-flex-col",children:s.jsx("div",{className:"richtext-flex richtext-justify-end richtext-gap-3 richtext-text-sm",children:s.jsxs("span",{children:[e.storage.characterCount.characters(),"/",r," ",n("editor.characters")]})})})}):s.jsx("div",{className:"richtext-flex richtext-items-center richtext-justify-between richtext-p-3 richtext-border-t",children:s.jsx("div",{className:"richtext-flex richtext-flex-col",children:s.jsx("div",{className:"richtext-flex richtext-justify-end richtext-gap-3 richtext-text-sm",children:s.jsxs("span",{children:[e.storage.characterCount.characters()," ",n("editor.characters")]})})})})}function $t(){const{toasts:e}=Hn.useToast();return s.jsxs(Pa,{children:[e.map(({id:t,title:n,description:r,action:i,...o})=>s.jsxs(Sn,{...o,children:[s.jsxs("div",{className:"richtext-grid richtext-gap-1",children:[n&&s.jsx(Pn,{children:n}),r&&s.jsx(On,{children:r})]}),i,s.jsx(En,{})]},t)),s.jsx(An,{})]})}const $a=`
.reactjs-tiptap-editor,
.richtext-dialog-content {
  button,
  input:where([type=button]),
  input:where([type=reset]),
  input:where([type=submit]) {
    -webkit-appearance: button;
    background-color: transparent;
    background-image: none;
  }

  input,
  optgroup,
  select {
    font-family: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    font-size: 100%;
    font-weight: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    color: inherit;
  }

  button {
    font-family: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    font-size: 100%;
    font-weight: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    color: inherit;
  }

  *,
  ::before,
  ::after {
    box-sizing: border-box;
    border-width: 0;
    border-style: solid;
    border-color: hsl(var(--richtext-border));
  }

  background-color: hsl(var(--richtext-background));
  color: hsl(var(--richtext-foreground));

  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }

  a {
    color: inherit;
    text-decoration: inherit;
  }

  b,
  strong {
    font-weight: bolder;
  }

  code,
  kbd,
  samp,
  pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
    font-feature-settings: normal;
    font-variation-settings: normal;
    font-size: 1em;
  }

  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }

  input {
    border-width: 1px;
  }


  input::placeholder {
    opacity: 1;
    color: #9ca3af;
  }

  button, input {
    cursor: pointer;
    color: inherit;
  }

  img,
  svg,
  video,
  canvas,
  audio,
  iframe,
  embed,
  object {
    display: block;
    vertical-align: middle;
  }

  img,
  video {
    max-width: 100%;
    height: auto;
  }
}

div[data-radix-popper-content-wrapper],
div[data-tippy-root] {
  *,
  ::before,
  ::after {
    box-sizing: border-box;
    border-width: 0;
    border-style: solid;
    border-color: hsl(var(--richtext-border));
  }

  background-color: hsl(var(--richtext-background));
  color: hsl(var(--richtext-foreground));

  button, input {
    cursor: pointer;
    color: inherit;
  }
}
`,Da=m.memo(({children:e,id:t})=>{const[,n]=Ce.useStoreEditableEditor(a=>a.value),[,r]=Ce.useStoreTheme(a=>a.value),i=a=>{n({value:a.detail})},o=a=>{r({value:a.detail})};return m.useEffect(()=>{const a=ge.listenEvent(ge.EVENTS.EDIT(t),i),c=ge.listenEvent(ge.EVENTS.UPDATE_THEME(t),o);return()=>{a(),c()}},[]),s.jsx(s.Fragment,{children:e})});function Dt({children:e,id:t}){return s.jsx(Ce.ProviderEditableEditor,{children:s.jsx(Ce.ProviderTheme,{children:s.jsx(Da,{id:t,children:e})})})}const kt="data-rc-order",Bt="data-rc-priority",ka="rc-util-key",qe=new Map;function Ba(e,t){if(!e)return!1;if(e.contains)return e.contains(t);let n=t;for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function _n({mark:e}={}){return e?e.startsWith("data-")?e:`data-${e}`:ka}function nt(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function La(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function Nn(e){return[...(qe.get(e)||e).children].filter(t=>t.tagName==="STYLE")}function Rn(e,t={}){const{csp:n,prepend:r,priority:i=0}=t,o=La(r),a=o==="prependQueue",c=document.createElement("style");c.setAttribute(kt,o),a&&i&&c.setAttribute(Bt,`${i}`),n!=null&&n.nonce&&(c.nonce=n==null?void 0:n.nonce),c.innerHTML=e;const l=nt(t),{firstChild:u}=l;if(r){if(a){const d=Nn(l).filter(f=>{if(!["prepend","prependQueue"].includes(f.getAttribute(kt)))return!1;const h=Number(f.getAttribute(Bt)||0);return i>=h});if(d.length>0)return l.insertBefore(c,d.at(-1).nextSibling),c}u.before(c)}else l.append(c);return c}function In(e,t={}){const n=nt(t);return Nn(n).find(r=>r.getAttribute(_n(t))===e)}function za(e,t={}){const n=In(e,t);n&&n.remove()}function Fa(e,t){const n=qe.get(e);if(!n||!Ba(document,n)){const r=Rn("",t),{parentNode:i}=r;qe.set(e,i),r.remove()}}function Ha(e,t,n={}){var a,c,l;const r=nt(n);Fa(r,n);const i=In(t,n);if(i)return(a=n.csp)!=null&&a.nonce&&i.nonce!==((c=n.csp)==null?void 0:c.nonce)&&(i.nonce=(l=n.csp)==null?void 0:l.nonce),i.innerHTML!==e&&(i.innerHTML=e),i;const o=Rn(e,n);return o.setAttribute(_n(n),t),o}function qa(e,t){const{content:n,extensions:r,useEditorOptions:i={},renderToolbar:o,renderHeader:a}=e,c=m.useId(),l=m.useMemo(()=>{const x=Hs(r,r,"name");return[...r.map(j=>{const A=r.find(_=>_.name===j.name);return A?j.configure(A.options):j}),...x].map((j,A)=>j.configure({sort:A}))},[r]),u=Un.throttle(x=>{var j;const p=f(x,e.output);(j=e==null?void 0:e.onChangeContent)==null||j.call(e,p)},qn.EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME),d=k.useEditor({extensions:l,content:n,immediatelyRender:(e==null?void 0:e.immediatelyRender)||!1,onUpdate:({editor:x})=>{u&&u(x)},...i});m.useImperativeHandle(t,()=>({editor:d})),m.useEffect(()=>{document.documentElement.classList.toggle("dark",e.dark),Lt.themeActions.setTheme(c,e.dark?"dark":"light")},[e.dark]),m.useEffect(()=>{d==null||d.setEditable(!(e!=null&&e.disabled)),Gn.editableEditorActions.setDisable(c,!(e!=null&&e.disabled))},[d,e==null?void 0:e.disabled]),m.useEffect(()=>((e==null?void 0:e.resetCSS)!==!1&&Ha($a,"react-tiptap-reset"),()=>{za("react-tiptap-reset")}),[e==null?void 0:e.resetCSS]);function f(x,p){return e!=null&&e.removeDefaultWrapper?p==="html"?x.isEmpty?"":x.getHTML():p==="json"?x.isEmpty?{}:x.getJSON():p==="text"?x.isEmpty?"":x.getText():"":p==="html"?x.getHTML():p==="json"?x.getJSON():p==="text"?x.getText():""}m.useLayoutEffect(()=>{d&&(d.id=c)},[c,d]),m.useEffect(()=>()=>{var x;(x=d==null?void 0:d.destroy)==null||x.call(d)},[]);const h=Gt.hasExtension(d,"characterCount");if(!d)return s.jsx(s.Fragment,{});const v=!(e!=null&&e.hideToolbar)&&s.jsx(Ia,{disabled:!!(e!=null&&e.disabled),editor:d,toolbar:e.toolbar}),b=s.jsxs(s.Fragment,{children:[a&&a(),s.jsx(k.EditorContent,{className:`richtext-relative ${(e==null?void 0:e.contentClass)||""}`,editor:d}),h&&s.jsx(Ma,{editor:d,extensions:r}),!(e!=null&&e.hideBubble)&&s.jsx(Ra,{bubbleMenu:e==null?void 0:e.bubbleMenu,disabled:e==null?void 0:e.disabled,editor:d})]});return o&&v?s.jsxs("div",{className:"reactjs-tiptap-editor",children:[s.jsx(Dt,{id:c,children:s.jsxs(ae.TooltipProvider,{delayDuration:0,disableHoverableContent:!0,children:[o(v),s.jsx("div",{className:"richtext-overflow-hidden richtext-rounded-[0.5rem] richtext-bg-background richtext-shadow richtext-outline richtext-outline-1",children:s.jsx("div",{className:"richtext-flex richtext-max-h-full richtext-w-full richtext-flex-col",children:b})})]})}),s.jsx($t,{})]}):s.jsxs("div",{className:"reactjs-tiptap-editor",children:[s.jsx(Dt,{id:c,children:s.jsx(ae.TooltipProvider,{delayDuration:0,disableHoverableContent:!0,children:s.jsx("div",{className:"richtext-overflow-hidden richtext-rounded-[0.5rem] richtext-bg-background richtext-shadow richtext-outline richtext-outline-1",children:s.jsxs("div",{className:"richtext-flex richtext-max-h-full richtext-w-full richtext-flex-col",children:[v,b]})})})}),s.jsx($t,{})]})}const Ga=m.forwardRef(qa),Ua=g.Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new g.Plugin({key:new g.PluginKey("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const a=o-i,c=0,l=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(c,l);return e=!0,u}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:t.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!t.getMeta("paste"))return!1;const c=t.selection.$head.pos,l=o-r,u=c-l,d=c;return t.deleteRange(u,d),!(this.storage.characters({node:t.doc})>r)}})]}});function Va(e={}){return new g.Plugin({view(t){return new Ka(t,e)}})}class Ka{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=a=>{this[i](a)};return t.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r;if(n){let c=t.nodeBefore,l=t.nodeAfter;if(c||l){let u=this.editorView.nodeDOM(this.cursorPos-(c?c.nodeSize:0));if(u){let d=u.getBoundingClientRect(),f=c?d.bottom:d.top;c&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:d.left,right:d.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let c=this.editorView.coordsAtPos(this.cursorPos);r={left:c.left-this.width/2,right:c.left+this.width/2,top:c.top,bottom:c.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,a;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,a=-pageYOffset;else{let c=i.getBoundingClientRect();o=c.left-i.scrollLeft,a=c.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-a+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!o){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=g.dropPoint(this.editorView.state.doc,a,this.editorView.dragging.slice);c!=null&&(a=c)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const Wa=g.Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Va(this.options)]}}),Ja=g.Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new g.Plugin({key:new g.PluginKey("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,o=[];if(!n||!r)return g.DecorationSet.create(e,[]);let a=0;this.options.mode==="deepest"&&e.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;a+=1});let c=0;return e.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&a-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";o.push(g.Decoration.node(u,u+l.nodeSize,{class:this.options.className}))}),g.DecorationSet.create(e,o)}}})]}});class E extends g.Selection{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return E.valid(r)?new E(r):g.Selection.near(r)}content(){return g.Slice.empty}eq(t){return t instanceof E&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new E(t.resolve(n.pos))}getBookmark(){return new rt(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Xa(t)||!Ya(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&E.valid(t))return t;let i=t.pos,o=null;for(let a=t.depth;;a--){let c=t.node(a);if(n>0?t.indexAfter(a)<c.childCount:t.index(a)>0){o=c.child(n>0?t.indexAfter(a):t.index(a)-1);break}else if(a==0)return null;i+=n;let l=t.doc.resolve(i);if(E.valid(l))return l}for(;;){let a=n>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!g.NodeSelection.isSelectable(o)){t=t.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=a,i+=n;let c=t.doc.resolve(i);if(E.valid(c))return c}return null}}}E.prototype.visible=!1;E.findFrom=E.findGapCursorFrom;g.Selection.jsonID("gapcursor",E);class rt{constructor(t){this.pos=t}map(t){return new rt(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return E.valid(n)?new E(n):g.Selection.near(n)}}function Xa(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Ya(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Za(){return new g.Plugin({props:{decorations:nc,createSelectionBetween(e,t,n){return t.pos==n.pos&&E.valid(n)?new E(n):null},handleClick:ec,handleKeyDown:Qa,handleDOMEvents:{beforeinput:tc}}})}const Qa=g.keydownHandler({ArrowLeft:be("horiz",-1),ArrowRight:be("horiz",1),ArrowUp:be("vert",-1),ArrowDown:be("vert",1)});function be(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,o){let a=r.selection,c=t>0?a.$to:a.$from,l=a.empty;if(a instanceof g.TextSelection){if(!o.endOfTextblock(n)||c.depth==0)return!1;l=!1,c=r.doc.resolve(t>0?c.after():c.before())}let u=E.findGapCursorFrom(c,t,l);return u?(i&&i(r.tr.setSelection(new E(u))),!0):!1}}function ec(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!E.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&g.NodeSelection.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new E(r))),!0)}function tc(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof E))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=g.Fragment.empty;for(let a=r.length-1;a>=0;a--)i=g.Fragment.from(r[a].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new g.Slice(i,0,0));return o.setSelection(g.TextSelection.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function nc(e){if(!(e.selection instanceof E))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",g.DecorationSet.create(e.doc,[g.Decoration.widget(e.selection.head,t,{key:"gapcursor"})])}const rc=g.Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[Za()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=g.callOrReturn(g.getExtensionField(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}}),ic=g.Node.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",g.mergeAttributes(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:c}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&l&&a){const f=l.filter(h=>c.includes(h.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),oc=g.Node.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",g.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),sc=g.Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new g.Plugin({key:new g.PluginKey("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const o=this.editor.isEmpty;return e.descendants((a,c)=>{const l=r>=c&&r<=c+a.nodeSize,u=!a.isLeaf&&g.isNodeEmpty(a);if((l||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const f=g.Decoration.node(c,c+a.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:c,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),g.DecorationSet.create(e,i)}}})]}}),ac=g.Node.create({name:"text",group:"inline"}),cc=g.Extension.create({name:"base-kit",addExtensions(){const e=[];return this.options.document!==!1&&e.push(Wn.Document.configure()),this.options.placeholder!==!1&&e.push(sc.configure({placeholder:({node:t,pos:n,editor:r})=>{var i,o,a,c,l;return((i=t==null?void 0:t.type)==null?void 0:i.name)==="columns"||((o=t==null?void 0:t.content)==null?void 0:o.size)!==0?"":((a=t==null?void 0:t.type)==null?void 0:a.name)==="heading"?`${N.localeActions.t(`editor.heading.h${t.attrs.level}.tooltip`)}`:((c=t==null?void 0:t.type)==null?void 0:c.name)==="codeBlock"||((l=t==null?void 0:t.type)==null?void 0:l.name)==="table"?"":r.extensionManager.extensions.some(u=>u.name==="slashCommand")?N.localeActions.t("editor.slash"):N.localeActions.t("editor.content")},...this.options.placeholder})),this.options.focus!==!1&&e.push(Ja.configure({className:"focus",...this.options.focus})),this.options.text!==!1&&e.push(ac.configure()),this.options.textBubble!==!1&&e.push(Xn.TextBubble.configure()),this.options.gapcursor!==!1&&e.push(rc.configure()),this.options.dropcursor!==!1&&e.push(Wa.configure({...this.options.dropcursor,width:2,class:"ProseMirror-dropcursor border-black"})),this.options.characterCount!==!1&&e.push(Ua.configure(this.options.characterCount)),this.options.paragraph!==!1&&e.push(oc.configure(this.options.paragraph)),this.options.hardBreak!==!1&&e.push(ic.configure(this.options.hardBreak)),this.options.listItem!==!1&&e.push(Vn.ListItem.configure(this.options.listItem)),this.options.textStyle!==!1&&e.push(Kn.TextStyle.configure(this.options.textStyle)),this.options.trailingNode!==!1&&e.push(Yn.TrailingNode.configure(this.options.trailingNode)),this.options.selection!==!1&&e.push(Jn.Selection),this.options.multiColumn!==!1&&e.push(we.Column,we.MultiColumn),e}});exports.BubbleMenu=k.BubbleMenu;exports.BaseKit=cc;exports.default=Ga;exports.useEditorState=Zn;
